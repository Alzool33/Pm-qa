<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة المشاريع قسم الإنشاءات</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        /* شريط علوي */
        .top-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .search-container {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 8px 15px;
            min-width: 300px;
        }

        .search-container input {
            background: none;
            border: none;
            outline: none;
            color: white;
            font-size: 14px;
            width: 100%;
            margin-left: 10px;
        }

        .search-container input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .notifications {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-icon {
            position: relative;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* الحاوي الرئيسي */
        .main-container {
            display: flex;
            min-height: calc(100vh - 60px);
        }

        /* القائمة الجانبية */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
            overflow-y: auto;
        }

        .sidebar-header {
            text-align: center;
            padding: 0 20px 30px;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }

        .sidebar-header h2 {
            color: #333;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            color: #666;
            font-size: 14px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
            border-right: 3px solid transparent;
            cursor: pointer;
        }

        .menu-item:hover {
            background: rgba(102, 126, 234, 0.1);
            border-right-color: #667eea;
        }

        .menu-item.active {
            background: rgba(102, 126, 234, 0.15);
            border-right-color: #667eea;
            color: #667eea;
        }

        .menu-item i {
            width: 20px;
            margin-left: 15px;
            font-size: 16px;
        }

        .menu-item .badge {
            margin-right: auto;
            background: #ff4444;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
        }

        /* المحتوى الرئيسي */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .page-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-title {
            color: #333;
            font-size: 24px;
            font-weight: 600;
        }

        .logout-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #cc3333;
            transform: translateY(-2px);
        }

        /* بطاقات الإحصائيات */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .stat-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 15px;
            font-size: 24px;
            color: white;
        }

        .stat-info h3 {
            color: #333;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .stat-info p {
            color: #666;
            font-size: 12px;
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .stat-subtitle {
            color: #666;
            font-size: 14px;
        }

        /* قسم المشاريع */
        .projects-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .section-title {
            color: #333;
            font-size: 20px;
            font-weight: 600;
        }

        .search-box {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            width: 300px;
            outline: none;
        }

        .search-box:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* قائمة المشاريع */
        .projects-list {
            display: grid;
            gap: 20px;
        }

        .project-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-right: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .project-card:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .project-title {
            color: #333;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .project-number {
            color: #666;
            font-size: 12px;
        }

        .project-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
        }

        .status-active {
            background: #e3f2fd;
            color: #1976d2;
        }

        .project-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
        }

        .detail-item i {
            color: #667eea;
            margin-left: 8px;
            width: 16px;
        }

        .detail-label {
            color: #666;
            font-size: 12px;
            margin-left: 5px;
        }

        .detail-value {
            color: #333;
            font-size: 13px;
            font-weight: 500;
        }

        .progress-section {
            margin-top: 15px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-label {
            color: #666;
            font-size: 12px;
        }

        .progress-value {
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* الألوان للبطاقات */
        .stat-card.total { --color: #2196f3; }
        .stat-card.active { --color: #2196f3; }
        .stat-card.completed { --color: #4caf50; }
        .stat-card.warranty { --color: #9c27b0; }
        .stat-card.planning { --color: #ff9800; }

        .stat-card .stat-icon {
            background: var(--color);
        }

        /* تصميم متجاوب */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .search-container {
                min-width: 200px;
            }
            
            .page-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .project-details {
                grid-template-columns: 1fr;
            }
        }

        /* حالة التحميل */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* حالة فارغة */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state i {
            font-size: 64px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: #333;
        }

        /* تذييل الصفحة */
        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <!-- شريط علوي -->
    <div class="top-bar">
        <div class="search-container">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="البحث السريع...">
        </div>
        <div class="notifications">
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
                <span class="notification-badge">3</span>
            </div>
            <div class="notification-icon">
                <i class="fas fa-envelope"></i>
                <span class="notification-badge">5</span>
            </div>
            <div class="notification-icon">
                <i class="fas fa-user-circle"></i>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- القائمة الجانبية -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>نظام إدارة المشاريع</h2>
                <p>قسم الإنشاءات</p>
            </div>
            
            <nav>
                <a href="#" class="menu-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-th-large"></i>
                    لوحة التحكم
                </a>
                <a href="#" class="menu-item" onclick="showPage('projects')">
                    <i class="fas fa-building"></i>
                    المشاريع
                    <span class="badge">82</span>
                </a>
                <a href="#" class="menu-item" onclick="showPage('completed')">
                    <i class="fas fa-check-circle"></i>
                    المشاريع المكتملة
                </a>
                <a href="#" class="menu-item" onclick="showPage('warranty')">
                    <i class="fas fa-shield-alt"></i>
                    المشاريع تحت الضمان
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-city"></i>
                    المباني
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-tools"></i>
                    طلبات الصيانة
                    <span class="badge">12</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-clipboard-list"></i>
                    مهام الصيانة
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-chart-bar"></i>
                    التقارير
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-users"></i>
                    المستخدمين
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-cog"></i>
                    الإعدادات
                </a>
            </nav>
        </div>

        <!-- المحتوى الرئيسي -->
        <div class="main-content">
            <!-- صفحة لوحة التحكم -->
            <div id="dashboard-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">لوحة التحكم</h1>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        تسجيل الخروج
                    </button>
                </div>

                <!-- بطاقات الإحصائيات -->
                <div class="stats-grid">
                    <div class="stat-card total" onclick="showPage('projects')">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-building"></i>
                            </div>
                            <div class="stat-info">
                                <h3>إجمالي المشاريع</h3>
                                <p>0 قيد التنفيذ</p>
                            </div>
                        </div>
                        <div class="stat-number">82</div>
                        <div class="stat-subtitle">إجمالي المشاريع</div>
                    </div>

                    <div class="stat-card active">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3>قيد التنفيذ</h3>
                                <p>مشاريع نشطة</p>
                            </div>
                        </div>
                        <div class="stat-number">82</div>
                        <div class="stat-subtitle">المشاريع النشطة</div>
                    </div>

                    <div class="stat-card completed" onclick="showPage('completed')">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3>مكتملة</h3>
                                <p>مشاريع منجزة</p>
                            </div>
                        </div>
                        <div class="stat-number">0</div>
                        <div class="stat-subtitle">المشاريع المكتملة</div>
                    </div>

                    <div class="stat-card warranty" onclick="showPage('warranty')">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="stat-info">
                                <h3>تحت الضمان</h3>
                                <p>مشاريع ضمان</p>
                            </div>
                        </div>
                        <div class="stat-number">0</div>
                        <div class="stat-subtitle">تحت الضمان</div>
                    </div>

                    <div class="stat-card planning">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>قيد التخطيط</h3>
                                <p>مشاريع جديدة</p>
                            </div>
                        </div>
                        <div class="stat-number">0</div>
                        <div class="stat-subtitle">قيد التخطيط</div>
                    </div>
                </div>

                <!-- قسم أحدث المشاريع -->
                <div class="projects-section">
                    <div class="section-header">
                        <h2 class="section-title">أحدث المشاريع</h2>
                        <input type="text" class="search-box" placeholder="البحث في المشاريع..." id="projectSearch" oninput="filterProjects()">
                    </div>
                    
                    <div id="projects-container" class="projects-list">
                        <!-- سيتم تحميل المشاريع هنا -->
                    </div>
                </div>
            </div>

            <!-- صفحة المشاريع -->
            <div id="projects-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">جميع المشاريع</h1>
                    <div>
                        <button class="logout-btn" style="background: #4caf50; margin-left: 10px;">
                            <i class="fas fa-plus"></i>
                            إضافة مشروع
                        </button>
                        <button class="logout-btn" style="background: #2196f3;">
                            <i class="fas fa-file-excel"></i>
                            تصدير Excel
                        </button>
                    </div>
                </div>

                <div class="projects-section">
                    <div class="section-header">
                        <h2 class="section-title">قائمة المشاريع (82 مشروع)</h2>
                        <input type="text" class="search-box" placeholder="البحث في المشاريع..." id="allProjectsSearch" oninput="filterAllProjects()">
                    </div>
                    
                    <div id="all-projects-container" class="projects-list">
                        <!-- سيتم تحميل جميع المشاريع هنا -->
                    </div>
                </div>
            </div>

            <!-- صفحة المشاريع المكتملة -->
            <div id="completed-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">المشاريع المكتملة</h1>
                </div>

                <div class="projects-section">
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>لا توجد مشاريع مكتملة</h3>
                        <p>لم يتم العثور على أي مشاريع مكتملة حتى الآن</p>
                    </div>
                </div>
            </div>

            <!-- صفحة المشاريع تحت الضمان -->
            <div id="warranty-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">المشاريع تحت الضمان</h1>
                </div>

                <div class="projects-section">
                    <div class="empty-state">
                        <i class="fas fa-shield-alt"></i>
                        <h3>لا توجد مشاريع تحت الضمان</h3>
                        <p>لم يتم العثور على أي مشاريع تحت الضمان حتى الآن</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- تذييل الصفحة -->
    <div class="footer">
        للدعم الفني، تواصل مع الإدارة<br>
        جميع الحقوق محفوظة © 2024 - محمد عبدالرحيم نور
    </div>

    <script>
        // بيانات المشاريع الأصلية
        const projectsData = [
            {
                "id": 1,
                "projectNumber": "PRJ-2025-001",
                "projectName": "هدم واعادة بناء م س 753 مسجد وبيت امام تصميم خاص",
                "fundingEntity": "متبرع",
                "fundingSource": "الشيخ / فيصل بن قاسم آل ثاني",
                "contractNumber": "ديوان العمارة 127/12/127/2017",
                "regionName": "عنيزه",
                "landNumber": "م س 753",
                "contractor": "درواند للتجارة والمقاولات",
                "contractValue": 35000000.0,
                "startDate": "2019-01-06",
                "endDate": "2020-06-28",
                "adjustedEndDate": "2021-09-30",
                "currentProgress": 99.0,
                "status": "active",
                "projectManager": "م.ياسر عبد المولى",
                "consultantName": "م.ياسر عبد المولى",
                "projectUpdates": "9",
                "notes": "تم استخراج شهادة إتمام البناء للمشروع عن طريق مكتب استشاري خارجي من قبل المتبرع وجارى اجراءات تسليم مستندات المشروع للترقيم رسميا"
            },
            {
                "id": 2,
                "projectNumber": "PRJ-2025-002",
                "projectName": "مسجد نموذج خاص",
                "fundingEntity": "متبرع",
                "fundingSource": "غانم سلطان الهدبفي",
                "regionName": "روضة اقديم",
                "landNumber": "أ د 1141",
                "contractor": "المساكن للتجارة والمقاولات",
                "contractValue": 4200000.0,
                "startDate": "2016-04-01",
                "endDate": "2019-02-28",
                "currentProgress": 99.0,
                "status": "active",
                "consultantName": "م/عبدالعظيم",
                "projectUpdates": "10"
            },
            {
                "id": 3,
                "projectNumber": "PRJ-2025-003",
                "projectName": "مشروع مسجد M126A وبيت إمام I.H10B",
                "fundingEntity": "متبرع",
                "fundingSource": "إبراهيم هلال محمد الإبراهيم",
                "regionName": "روضة العمدة",
                "landNumber": "1308 ج ز أ",
                "contractor": "شركة النادي للتجارة والإنشاءات الهندسية",
                "contractValue": 4564000.0,
                "startDate": "2018-03-15",
                "endDate": "2020-01-30",
                "currentProgress": 99.0,
                "status": "active",
                "consultantName": "م.عامر عليان",
                "projectUpdates": "8"
            },
            {
                "id": 4,
                "projectNumber": "PRJ-2025-004",
                "projectName": "مشروع مسجد M117A وبيت إمام I.H7",
                "fundingEntity": "متبرع",
                "fundingSource": "ورثة الشيخ/محمد بن عبدالعزيز بن جاسم آل ثاني",
                "regionName": "الحسنة",
                "landNumber": "1089 ج ز أ",
                "contractor": "جاسم",
                "contractValue": 8000000.0,
                "startDate": "2017-05-20",
                "endDate": "2019-12-15",
                "currentProgress": 99.0,
                "status": "active",
                "consultantName": "م.ياسر عبد المولى",
                "projectUpdates": "12"
            }
        ];

        let filteredProjects = [...projectsData];
        let currentPage = 'dashboard';

        // تحميل المشاريع عند بدء الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            loadProjects();
            updateStats();
        });

        // عرض الصفحات
        function showPage(pageId) {
            // إخفاء جميع الصفحات
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.style.display = 'none');
            
            // إزالة الفئة النشطة من جميع عناصر القائمة
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            
            // عرض الصفحة المطلوبة
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.style.display = 'block';
                currentPage = pageId;
            }
            
            // إضافة الفئة النشطة للعنصر المحدد
            event.target.classList.add('active');
            
            // تحميل البيانات حسب الصفحة
            if (pageId === 'projects') {
                loadAllProjects();
            }
        }

        // تحديث الإحصائيات
        function updateStats() {
            const totalProjects = projectsData.length;
            const activeProjects = projectsData.filter(p => p.status === 'active').length;
            const completedProjects = projectsData.filter(p => p.status === 'completed').length;
            const warrantyProjects = projectsData.filter(p => p.status === 'warranty').length;
            const planningProjects = projectsData.filter(p => p.status === 'planning').length;

            // تحديث أرقام البطاقات
            const statNumbers = document.querySelectorAll('.stat-number');
            if (statNumbers.length >= 5) {
                statNumbers[0].textContent = totalProjects;
                statNumbers[1].textContent = activeProjects;
                statNumbers[2].textContent = completedProjects;
                statNumbers[3].textContent = warrantyProjects;
                statNumbers[4].textContent = planningProjects;
            }
        }

        // تحميل المشاريع في لوحة التحكم
        function loadProjects() {
            const container = document.getElementById('projects-container');
            if (!container) return;

            if (projectsData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-building"></i>
                        <h3>لا توجد مشاريع</h3>
                        <p>ابدأ بإضافة مشروع جديد أو استيراد المشاريع من Excel</p>
                    </div>
                `;
                return;
            }

            // عرض أول 5 مشاريع فقط في لوحة التحكم
            const recentProjects = projectsData.slice(0, 5);
            
            container.innerHTML = recentProjects.map(project => createProjectCard(project)).join('');
        }

        // تحميل جميع المشاريع
        function loadAllProjects() {
            const container = document.getElementById('all-projects-container');
            if (!container) return;

            if (filteredProjects.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>لا توجد نتائج</h3>
                        <p>لم يتم العثور على مشاريع تطابق البحث</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredProjects.map(project => createProjectCard(project)).join('');
        }

        // إنشاء بطاقة مشروع
        function createProjectCard(project) {
            const progressColor = project.currentProgress >= 90 ? '#4caf50' : 
                                 project.currentProgress >= 50 ? '#2196f3' : '#ff9800';
            
            return `
                <div class="project-card" onclick="showProjectDetails('${project.id}')">
                    <div class="project-header">
                        <div>
                            <div class="project-title">${project.projectName}</div>
                            <div class="project-number">${project.projectNumber}</div>
                        </div>
                        <div class="project-status status-${project.status}">
                            ${getStatusText(project.status)}
                        </div>
                    </div>
                    
                    <div class="project-details">
                        <div class="detail-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span class="detail-label">المنطقة:</span>
                            <span class="detail-value">${project.regionName}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-map"></i>
                            <span class="detail-label">رقم الأرض:</span>
                            <span class="detail-value">${project.landNumber}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-user"></i>
                            <span class="detail-label">المتبرع:</span>
                            <span class="detail-value">${project.fundingSource}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-building"></i>
                            <span class="detail-label">المقاول:</span>
                            <span class="detail-value">${project.contractor}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-dollar-sign"></i>
                            <span class="detail-label">قيمة العقد:</span>
                            <span class="detail-value">${formatCurrency(project.contractValue)} ريال</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-user-tie"></i>
                            <span class="detail-label">الاستشاري:</span>
                            <span class="detail-value">${project.consultantName || 'غير محدد'}</span>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <div class="progress-header">
                            <span class="progress-label">نسبة الإنجاز</span>
                            <span class="progress-value">${project.currentProgress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${project.currentProgress}%; background: ${progressColor};"></div>
                        </div>
                    </div>
                </div>
            `;
        }

        // تنسيق العملة
        function formatCurrency(amount) {
            return new Intl.NumberFormat('ar-SA').format(amount);
        }

        // الحصول على نص الحالة
        function getStatusText(status) {
            const statusMap = {
                'active': 'قيد التنفيذ',
                'completed': 'مكتمل',
                'warranty': 'تحت الضمان',
                'planning': 'قيد التخطيط',
                'suspended': 'متوقف'
            };
            return statusMap[status] || 'غير محدد';
        }

        // فلترة المشاريع في لوحة التحكم
        function filterProjects() {
            const searchTerm = document.getElementById('projectSearch').value.toLowerCase();
            const container = document.getElementById('projects-container');
            
            const filtered = projectsData.filter(project => 
                project.projectName.toLowerCase().includes(searchTerm) ||
                project.projectNumber.toLowerCase().includes(searchTerm) ||
                project.regionName.toLowerCase().includes(searchTerm) ||
                project.contractor.toLowerCase().includes(searchTerm)
            );

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>لا توجد نتائج</h3>
                        <p>لم يتم العثور على مشاريع تطابق البحث</p>
                    </div>
                `;
            } else {
                container.innerHTML = filtered.slice(0, 5).map(project => createProjectCard(project)).join('');
            }
        }

        // فلترة جميع المشاريع
        function filterAllProjects() {
            const searchTerm = document.getElementById('allProjectsSearch').value.toLowerCase();
            
            filteredProjects = projectsData.filter(project => 
                project.projectName.toLowerCase().includes(searchTerm) ||
                project.projectNumber.toLowerCase().includes(searchTerm) ||
                project.regionName.toLowerCase().includes(searchTerm) ||
                project.contractor.toLowerCase().includes(searchTerm)
            );

            loadAllProjects();
        }

        // عرض تفاصيل المشروع
        function showProjectDetails(projectId) {
            const project = projectsData.find(p => p.id == projectId);
            if (project) {
                alert(`تفاصيل المشروع: ${project.projectName}\nرقم المشروع: ${project.projectNumber}\nنسبة الإنجاز: ${project.currentProgress}%`);
            }
        }

        // تسجيل الخروج
        function logout() {
            if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
                window.location.href = '#login';
            }
        }

        // إضافة تأثيرات التفاعل
        document.addEventListener('DOMContentLoaded', function() {
            // تأثير hover للبطاقات
            const cards = document.querySelectorAll('.stat-card, .project-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
</body>
</html>

